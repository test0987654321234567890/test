<!DOCTYPE html><html lang="ja"><head><meta charset="UTF-8"><meta http-equiv="Cache-Control" content="no-cache"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>LIFF-APP</title><link href="style.css" rel="stylesheet"><link rel="icon" href="https://obs.line-scdn.net/0hrKkn3t_FLWRWFz-5ynlSMwRKJgZldTNvdCM5AzZocTAzTAxSbw8baSxCGjAzcghZIRAEQzVoAT96RgxSNiQHAzp_FTB6TBxzLSQXcjhEBiQ9XDZoYg0S"/></head><body><h1>LIFFツールv3</h1><h2>!!!!悪用厳禁!!!!</h2><p><span id="err"> </span></p><p><span id="info"> </span></p><button type="button" onclick=pc() >tokenを転送</button><button type="button" onclick=clos() >tokenを保持して閉じる</button><p>メッセージ送信:<input type=text id=test value="てすと"><button type="button" onclick= test() >送信</button></p><span id="button1"><button type="button" onclick= url()>通報リンク変換</button><button type="button" onclick= uni()>ユニコ自動連投</button><button type="button" onclick= flex()>Flexメッセージ生成</button><button type="button" onclick= alt()>Flexユニコ</button></span><div id="app"></div><p>&copy; 2023- <a href="https://github.com/piloking/">piloking</a>&<a href="https://github.com/EdamAme-x">amex</a></p><script src="https://cdn.jsdelivr.net/npm/js-cookie@3.0.5/dist/js.cookie.min.js"></script><script>const config = {"debug": !1};var token;var apptype=0;var urlHenkan=`<h1>通報リンク相互変換</h1><p>url:<input type=text id=url value=""><button type="button" onclick= OCurl()>変換</button></p><p>urlの形式:<span id="type"></span></p><p>通報リンク<br><span id="rep"></span></p><button type="button" onclick= clip(0)>通報リンクをコピー</button><br><p>参加リンク<br><span id="join"></span></p><button type="button" onclick= clip(1)>参加リンクをコピー</button><br><p>招待リンク<br><span id="inv"></span></p><button type="button" onclick= clip(2)>招待リンクをコピー</button><br><p>webデータ:<span id="squ"></span></p><p>ticket:<span id="tic"></span></p>`;var button1=document.getElementById('button1');var app=document.getElementById('app');liff_init();function liff_init(){var hashString = location.hash.substr(1);if (hashString){var hashAry = hashString.split('&');token=hashAry[1].substr(13);init(token);isliff();}else{document.getElementById('err').innerHTML="tokenが指定されていません"}}function init(t){fetch(`https://api.line.me/oauth2/v2.1/verify?access_token=${t}`, {"headers": {"accept": "application/json","accept-language": "ja-JP,ja;q=0.9,en-US;q=0.8,en;q=0.7","cache-control": "no-cache","content-type": "application/json","pragma": "no-cache","sec-ch-ua": "\"Not/A)Brand\";v=\"99\", \"Google Chrome\";v=\"115\", \"Chromium\";v=\"115\"","sec-ch-ua-mobile": "?0","sec-ch-ua-platform": "\"Windows\"","sec-fetch-dest": "empty","sec-fetch-mode": "cors","sec-fetch-site": "cross-site"},"referrer": "https://piloking.github.io/","referrerPolicy": "strict-origin-when-cross-origin","body": null,"method": "GET","mode": "cors","credentials": "omit"}).then((data) => data.json()).then((res) =>{console.log(res);token=null;if (res.error){document.getElementById('err').innerHTML= "Error: "+res.error;};if (res.scope){document.getElementById('err').innerHTML= "Success: "+res.scope;token=t;}});}function send(m){let j = JSON.stringify({messages:m});fetch("https://api.line.me/message/v3/share", {"headers": {"accept": "application/json","accept-language": "ja-JP,ja;q=0.9,en-US;q=0.8,en;q=0.7","authorization": `Bearer ${token}`,"cache-control": "no-cache","content-type": "application/json","pragma": "no-cache","sec-fetch-dest": "empty","sec-fetch-mode": "cors","sec-fetch-site": "cross-site","x-requested-with": "jp.naver.line.android"},"referrerPolicy": "strict-origin-when-cross-origin","body": j,"method": "POST","mode": "cors","credentials": "omit"}).catch((err) => document.getElementById('err').innerHTML="Error: "+err).then((data) => data.json()).then((res) => {console.log(res);if (res.message){document.getElementById('err').innerHTML="Error: "+res.message;return false}if (res.status){document.getElementById('err').innerHTML="Send: "+res.status;return true}});}function pc(){open("https://line.me/R/share?text=https%3A%2F%2Fliff-tool.f5.si%2F%23liff-tool%26access_token="+token);}function clos(){open("https://line.me/R/nv/chat")}function isliff(){document.getElementById('info').innerHTML=token;}function test(){let test = document.getElementById('test').value;send([{type:"text",text:test}])}function url(){button1.innerHTML=`<button type="button" onclick= url() id="RED" >通報リンク変換</button><button type="button" onclick= uni()>ユニコ自動連投</button><button type="button" onclick= flex()>Flexメッセージ生成</button><button type="button" onclick= alt()>Flexユニコ</button>`;app.innerHTML=urlHenkan;}function uni(){button1.innerHTML=`<button type="button" onclick= url()>通報リンク変換</button><button type="button" onclick= uni() id="RED">ユニコ自動連投</button><button type="button" onclick= flex()>Flexメッセージ生成</button><button type="button" onclick= alt()>Flexユニコ</button>`;}function flex(){button1.innerHTML=`<button type="button" onclick= url()>通報リンク変換</button><button type="button" onclick= uni()>ユニコ自動連投</button><button type="button" onclick= flex() id="RED">Flexメッセージ生成</button><button type="button" onclick= alt()>Flexユニコ</button>`;}function alt(){button1.innerHTML=`<button type="button" onclick= url()>通報リンク変換</button><button type="button" onclick= uni()>ユニコ自動連投</button><button type="button" onclick= flex()>Flexメッセージ生成</button><button type="button" onclick= alt() id="RED" >Flexユニコ</button>`;}function OCurl(){let url=document.getElementById("url").value;let type="不正なurlです";var tic;let urll=0;url=url.replace("line.me/ti/g2/","line://ti/g2/");url=url.replace("line.me/R/","line://");url=url.replace("https://","");urll=url.lastIndexOf("line://");url=url.substr(urll);if (url.substr(7,6)=="ti/g2/"){type="招待リンク";var s=url.substr(13);tic="";for (var i = 0; i < s.length; ++i) {if(s.charAt(i)=="?"){break}else{tic=tic+s.charAt(i)}}}else if(url.substr(7,14)=="square/report?"){type="通報リンク";tic="";var s=url.substr(21);s=s.substr(s.lastIndexOf("ticket=")+7);s=s+"&";s=s.substring(0,s.indexOf("&"));tic=s;}else if(url.substr(7,12)=="square/join?"){type="参加リンク";tic="";var s=url.substr(19);s=s.substr(s.lastIndexOf("ticket=")+7);s=s+"&";s=s.substring(0,s.indexOf("&"));tic=s;}document.getElementById("rep").innerHTML="line://square/report?ticket="+tic;document.getElementById("join").innerHTML="line://square/join?ticket="+tic;document.getElementById("inv").innerHTML="https://line.me/ti/g2/"+tic;document.getElementById("squ").innerHTML="https://square-api.line.me/smw/v2/static/sm/html/#/squareCover/"+tic+"?isTicket=true";document.getElementById("type").innerHTML=type;document.getElementById("tic").innerHTML=tic;}function clip(type){var txt;if (!navigator.clipboard) {alert("クリップボードに対応していません");return;}if (type==0){txt=document.getElementById("rep").innerHTML}else if(type==1){txt=document.getElementById("join").innerHTML}else if (type==2){txt=document.getElementById("inv").innerHTML}navigator.clipboard.writeText(txt);alert("コピーしました");}</script></body></html>
